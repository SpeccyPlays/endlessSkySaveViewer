<!DOCTYPE html>
<html>
  <head>
    <title>SpeccyPlays Endless Sky save file viewer</title>
    <link rel="icon" type="image/x-icon" href="/images/favicon.png" />
    <link rel="stylesheet" type="text/css" href="/CSS/styles.css" />
  </head>
  <body>
    <div class="uploadsection">
      <form name="uploadForm" id="uploadForm" action="./uploads/" method="POST" enctype="multipart/form-data">
        <label for="file">File</label>
        <input id="file" name="file" type="file" accept=".txt"/>
        <input type="submit" value="upload file" id="uploadbtn" disabled/>
      </form>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const uploadedFile = document.getElementById("file");
            const submitBtn = document.getElementById("uploadbtn");

            uploadedFile.addEventListener("change", verifyFile);

            function verifyFile() {
                let msg = "";
                const file = this.files[0];

                if (!file) {
                    msg = "No files selected";
                    submitBtn.disabled = true;
                } 
                else if (file.type !== "text/plain" || !file.name.endsWith(".txt")) {
                    msg = "Invalid file type";
                    submitBtn.disabled = true;
                } 
                else {
                    submitBtn.disabled = false;
                }

                document.getElementById("msg").textContent = msg;
            }
        });
    </script>
  </body>
</html>